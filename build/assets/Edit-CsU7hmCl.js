import{z as y,l as b,r as i,k as D,j as e,C as F}from"./index-4WgTBl-l.js";import"./index-DTv8A9pA.js";import{g as S,u as V}from"./crud-B82QNuOT.js";import{C as k,a as E}from"./CCardBody-BOTH1aaN.js";import{C as w}from"./CCardHeader-frLQR2cS.js";import{C as L,a as o}from"./CRow-CegcB6TX.js";import{C as P}from"./CForm-BNK280YJ.js";import{C as c}from"./CFormLabel-ms8vvlzO.js";import{C as f}from"./CFormInput-DcXD1ixu.js";import{C as r}from"./CFormControlValidation-9ONXiwLo.js";import{a as q}from"./index.esm-CdVIU4p-.js";import"./CFormControlWrapper-D2FNqYS1.js";const K=()=>{const{id:d}=y(),C=b(),[v,x]=i.useState(!1),[l,j]=i.useState({}),[s,a]=i.useState(!1),{currentUser:h}=D();i.useEffect(()=>{(async()=>{a(!0);const t=await S("deliveries",d);t.success&&j(t.data),a(!1)})()},[d]);const p=async n=>{n.preventDefault();const t=n.currentTarget;if(t.checkValidity()===!1)x(!0);else{a(!0);const g=new FormData(t),m=Object.fromEntries(g.entries()),u=await V("deliveries",d,{uid:h.uid,earning:m.delivery*m.rate,...m});u.success?(console.log(u),a(!1),C("/items")):(a(!1),console.error(u))}};return e.jsx(e.Fragment,{children:e.jsxs(k,{className:"",children:[e.jsxs(w,{children:["Edit Page ",s&&e.jsx(F,{size:"sm"})]}),e.jsx(E,{children:e.jsx(L,{children:e.jsxs(P,{className:"row g-3 needs-validation",noValidate:!0,validated:v,onSubmit:p,children:[e.jsxs(o,{md:4,children:[e.jsx(c,{htmlFor:"validationCustom01",children:"Delivery Count"}),e.jsx(f,{disabled:s,defaultValue:l.delivery,type:"number",name:"delivery",id:"validationCustom01",required:!0}),e.jsx(r,{valid:!0,children:"Looks good!"}),e.jsx(r,{invalid:!0,children:"Error occurs!"})]}),e.jsxs(o,{md:6,children:[e.jsx(c,{htmlFor:"validationCustom03",children:"Date"}),e.jsx(f,{name:"date",type:"date",id:"validationCustom03",disabled:s,defaultValue:l.date,required:!0}),e.jsx(r,{invalid:!0,children:"Please provide a valid date."}),e.jsx(r,{valid:!0,children:"Looks good!."})]}),e.jsxs(o,{md:6,children:[e.jsx(c,{htmlFor:"validationCustom04",children:"Rate"}),e.jsx(f,{name:"rate",type:"number",id:"validationCustom04",disabled:s,defaultValue:l.rate,required:!0}),e.jsx(r,{invalid:!0,children:"Please provide a rate."}),e.jsx(r,{valid:!0,children:"Looks good!."})]}),e.jsx(o,{xs:12,children:e.jsx(q,{color:"primary",type:"submit",disabled:s,children:"Submit form"})})]})})})]})})};export{K as default};
