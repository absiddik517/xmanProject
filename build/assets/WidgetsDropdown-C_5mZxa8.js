import{r as h,_ as L,R as c,b as z,c as K,P as a,d as U,j as e,k as Y,C as P}from"./index-4WgTBl-l.js";import{c as m}from"./index.esm-CdVIU4p-.js";import{a as k,C as J,b as Z}from"./index.esm-DkV3rXFc.js";import{a as u,C as V}from"./CRow-CegcB6TX.js";import{C as q,a as G}from"./CCardBody-BOTH1aaN.js";import{C as $}from"./CCardHeader-frLQR2cS.js";import{c as _,a as ee,b as ae}from"./cib-twitter-00_H7eLt.js";import{a as se,b as A,d as te,e as re}from"./cil-people-B7m6JsLl.js";import{a as le}from"./crud-B82QNuOT.js";import{k as R,l as E,m as D,n as o}from"./DefaultLayout-BLFrAsgA.js";var C=h.forwardRef(function(s,d){var n,f=s.action,y=s.chart,t=s.className,g=s.color,p=s.title,b=s.value,j=L(s,["action","chart","className","color","title","value"]);return c.createElement(q,z({className:K((n={},n["bg-".concat(g)]=g,n["text-white"]=g,n),t)},j,{ref:d}),c.createElement(G,{className:"pb-0 d-flex justify-content-between align-items-start"},c.createElement("div",null,b&&c.createElement("div",{className:"fs-4 fw-semibold"},b),p&&c.createElement("div",null,p)),f),y)});C.propTypes={action:a.node,chart:a.oneOfType([a.string,a.node]),className:a.string,color:U,title:a.oneOfType([a.string,a.node]),value:a.oneOfType([a.string,a.node,a.number])};C.displayName="CWidgetStatsA";var v=h.forwardRef(function(s,d){var n,f=s.className,y=s.chart,t=s.color,g=s.icon,p=s.values,b=L(s,["className","chart","color","icon","values"]);return c.createElement(q,z({className:f},b,{ref:d}),c.createElement($,{className:K("position-relative d-flex justify-content-center align-items-center",(n={},n["bg-".concat(t)]=t,n))},g,y),c.createElement(G,{className:"row text-center"},p&&p.map(function(j,w){return c.createElement(c.Fragment,{key:w},w%2!==0&&c.createElement("div",{className:"vr"}),c.createElement(u,null,c.createElement("div",{className:"fs-5 fw-semibold"},j.value),c.createElement("div",{className:"text-uppercase text-body-secondary small"},j.title)))})))});v.propTypes={chart:a.oneOfType([a.string,a.node]),className:a.string,color:U,icon:a.oneOfType([a.string,a.node]),values:a.arrayOf(a.any)};v.displayName="CWidgetStatsD";const ie=s=>{const d={elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}},maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}}};return e.jsxs(V,{className:s.className,xs:{gutter:4},children:[e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(v,{...s.withCharts&&{chart:e.jsx(k,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[65,59,84,84,51,55,40],fill:!0}]},options:d})},icon:e.jsx(m,{icon:_,height:52,className:"my-4 text-white"}),values:[{title:"friends",value:"89K"},{title:"feeds",value:"459"}],style:{"--cui-card-cap-bg":"#3b5998"}})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(v,{...s.withCharts&&{chart:e.jsx(k,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[1,13,9,17,34,41,38],fill:!0}]},options:d})},icon:e.jsx(m,{icon:ee,height:52,className:"my-4 text-white"}),values:[{title:"followers",value:"973k"},{title:"tweets",value:"1.792"}],style:{"--cui-card-cap-bg":"#00aced"}})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(v,{...s.withCharts&&{chart:e.jsx(k,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[78,81,80,45,34,12,40],fill:!0}]},options:d})},icon:e.jsx(m,{icon:ae,height:52,className:"my-4 text-white"}),values:[{title:"contacts",value:"500"},{title:"feeds",value:"1.292"}],style:{"--cui-card-cap-bg":"#4875b4"}})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(v,{color:"warning",...s.withCharts&&{chart:e.jsx(k,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[35,23,56,22,97,23,64],fill:!0}]},options:d})},icon:e.jsx(m,{icon:se,height:52,className:"my-4 text-white"}),values:[{title:"events",value:"12+"},{title:"meetings",value:"4"}]})})]})};ie.propTypes={className:a.string,withCharts:a.bool};var T=function(s,d){if(!(typeof window>"u")&&!(typeof document>"u")){var n=document.body;return window.getComputedStyle(n,null).getPropertyValue(s).replace(/^\s/,"")}};const ne=s=>{var B,M,S,F,W,O,H,I;const d=h.useRef(null),n=h.useRef(null),[f,y]=h.useState(!1),[t,g]=h.useState({}),{currentUser:p}=Y(),b=N=>{const l={delivery:[],totalDelivery:0,earning:[],totalEarning:0,date:[],range:{}},x={};for(const r of N){const i=r.data.date,Q=parseInt(r.data.delivery),X=r.data.earning;x[i]||(x[i]={delivery:0,earning:0}),x[i].delivery+=Q,x[i].earning+=X}for(const r in x)l.delivery.push(x[r].delivery),l.earning.push(x[r].earning),l.date.push(r);return l.totalDelivery=l.delivery.reduce((r,i)=>r+i,0),l.totalEarning=l.earning.reduce((r,i)=>r+i,0),l.range.delivery=l.delivery.reduce((r,i)=>(i<r.min&&(r.min=i),i>r.max&&(r.max=i),r),{min:l.delivery[0],max:l.delivery[0]}),l.range.earning=l.earning.reduce((r,i)=>(i<r.min&&(r.min=i),i>r.max&&(r.max=i),r),{min:l.earning[0],max:l.earning[0]}),g(l),console.log(l),l},j=async()=>{y(!0);const N=await le("deliveries",p.uid);N.success&&(y(!1),console.log(b(N.data)))};h.useEffect(()=>{j()},[p]);const w=()=>{document.documentElement.addEventListener("ColorSchemeChange",()=>{d.current&&setTimeout(()=>{d.current.data.datasets[0].pointBackgroundColor=T("--cui-primary"),d.current.update()}),n.current&&setTimeout(()=>{n.current.data.datasets[0].pointBackgroundColor=T("--cui-info"),n.current.update()})})};return h.useEffect(()=>{w()},[d,n]),e.jsxs(V,{className:s.className,xs:{gutter:4},children:[e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(C,{color:"primary",value:e.jsxs(e.Fragment,{children:[t.totalDelivery," "," ",f&&e.jsx(P,{size:"sm"}),e.jsx("span",{className:"fs-6 fw-normal"})]}),title:"Deliveries",action:e.jsxs(R,{alignment:"end",children:[e.jsx(E,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(m,{icon:A})}),e.jsxs(D,{children:[e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Another action"}),e.jsx(o,{children:"Something else here..."}),e.jsx(o,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(J,{ref:d,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:t.date,datasets:[{label:"Delivery Count",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:T("--cui-primary"),data:t.delivery}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:((M=(B=t==null?void 0:t.range)==null?void 0:B.delivery)==null?void 0:M.min)-5,max:((F=(S=t==null?void 0:t.range)==null?void 0:S.delivery)==null?void 0:F.max)+10,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(C,{color:"info",value:e.jsxs(e.Fragment,{children:["BDT ",t.totalEarning," ",f&&e.jsx(P,{size:"sm"})," Taka"]}),title:"Income",action:e.jsxs(R,{alignment:"end",children:[e.jsx(E,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(m,{icon:A})}),e.jsxs(D,{children:[e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Another action"}),e.jsx(o,{children:"Something else here..."}),e.jsx(o,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(J,{ref:n,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:t.date,datasets:[{label:"Income",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:T("--cui-info"),data:t.earning}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:((O=(W=t==null?void 0:t.range)==null?void 0:W.earning)==null?void 0:O.min)-5,max:((I=(H=t==null?void 0:t.range)==null?void 0:H.earning)==null?void 0:I.max)+100,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(C,{color:"warning",value:e.jsxs(e.Fragment,{children:["2.49%"," ",e.jsxs("span",{className:"fs-6 fw-normal",children:["(84.7% ",e.jsx(m,{icon:te}),")"]})]}),title:"Conversion Rate",action:e.jsxs(R,{alignment:"end",children:[e.jsx(E,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(m,{icon:A})}),e.jsxs(D,{children:[e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Another action"}),e.jsx(o,{children:"Something else here..."}),e.jsx(o,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(J,{className:"mt-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[78,81,80,45,34,12,40],fill:!0}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{display:!1},y:{display:!1}},elements:{line:{borderWidth:2,tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4}}}})})}),e.jsx(u,{sm:6,xl:4,xxl:3,children:e.jsx(C,{color:"danger",value:e.jsxs(e.Fragment,{children:["44K"," ",e.jsxs("span",{className:"fs-6 fw-normal",children:["(-23.6% ",e.jsx(m,{icon:re}),")"]})]}),title:"Sessions",action:e.jsxs(R,{alignment:"end",children:[e.jsx(E,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(m,{icon:A})}),e.jsxs(D,{children:[e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Another action"}),e.jsx(o,{children:"Something else here..."}),e.jsx(o,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(Z,{className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December","January","February","March","April"],datasets:[{label:"My First dataset",backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[78,81,80,45,34,12,40,85,65,23,12,98,34,84,67,82],barPercentage:.6}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1,drawTicks:!1},ticks:{display:!1}},y:{border:{display:!1},grid:{display:!1,drawBorder:!1,drawTicks:!1},ticks:{display:!1}}}}})})})]})};ne.propTypes={className:a.string,withCharts:a.bool};export{ne as W,ie as a,T as g};
